<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Registering a new format · FileIO</title><meta name="title" content="Registering a new format · FileIO"/><meta property="og:title" content="Registering a new format · FileIO"/><meta property="twitter:title" content="Registering a new format · FileIO"/><meta name="description" content="Documentation for FileIO."/><meta property="og:description" content="Documentation for FileIO."/><meta property="twitter:description" content="Documentation for FileIO."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FileIO</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../registry/">Registry table</a></li><li class="is-active"><a class="tocitem" href>Registering a new format</a><ul class="internal"><li><a class="tocitem" href="#Argument-fmt"><span>Argument <code>fmt</code></span></a></li><li><a class="tocitem" href="#Argument-magic"><span>Argument <code>magic</code></span></a></li><li><a class="tocitem" href="#Argument-extension"><span>Argument <code>extension</code></span></a></li><li><a class="tocitem" href="#Argument-libraries"><span>Argument <code>libraries</code></span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="../implementing/">Implementing loaders/savers</a></li><li><a class="tocitem" href="../world_age_issue/">World age issue</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Registering a new format</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Registering a new format</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaIO/FileIO.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaIO/FileIO.jl/blob/master/docs/src/registering.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Registering-a-new-format"><a class="docs-heading-anchor" href="#Registering-a-new-format">Registering a new format</a><a id="Registering-a-new-format-1"></a><a class="docs-heading-anchor-permalink" href="#Registering-a-new-format" title="Permalink"></a></h1><p>You register a new format by adding</p><pre><code class="language-julia hljs">add_format(fmt, magic, extension, libraries...)</code></pre><p>to FileIO&#39;s <a href="https://github.com/JuliaIO/FileIO.jl/blob/master/src/registry.jl">registry</a>. It&#39;s generally best if you experiment with this locally and make sure everything works before submitting a pull request. You&#39;ll need to <a href="https://julialang.github.io/Pkg.jl/v1/managing-packages/#developing"><code>pkg&gt; dev FileIO</code></a> to make the required changes.</p><p>Before going into detail explaining the arguments of <code>add_format</code>, here is a real example that could be used to register an I/O package for one of the <a href="https://en.wikipedia.org/wiki/Netpbm#File_formats">Netpbm image formats</a>:</p><pre><code class="language-julia hljs">add_format(format&quot;PPMBinary&quot;, &quot;P6&quot;, &quot;.ppm&quot;, [:Netpbm =&gt; UUID(&quot;f09324ee-3d7c-5217-9330-fc30815ba969&quot;)])</code></pre><p>Briefly, this indicates that files in this format typically have extension <code>.ppm</code>, the file contents typically start with &quot;P6&quot; (the byte sequence <code>[0x50, 0x36]</code>), and these files can be read and written by the <a href="https://github.com/JuliaIO/Netpbm.jl">Netpbm package</a>. (The <code>UUID</code> is Julia&#39;s unique identifier for this registered package and can be obtained from the <code>Project.toml</code> file.)</p><h2 id="Argument-fmt"><a class="docs-heading-anchor" href="#Argument-fmt">Argument <code>fmt</code></a><a id="Argument-fmt-1"></a><a class="docs-heading-anchor-permalink" href="#Argument-fmt" title="Permalink"></a></h2><p><code>fmt</code> is a <code>DataFormat</code> type, most conveniently created as <code>format&quot;IDENTIFIER&quot;</code>. If this file format has not previously been supported, you can make up <code>IDENTIFIER</code> yourself–there is no external standard, this is just a &quot;tag&quot; used internally by FileIO and its support routines. You should generally choose something that makes it easy to guess what format it refers to. Examples of some existing <code>fmt</code>s are:</p><ul><li><code>format&quot;PNG&quot;</code>: the format for <a href="https://en.wikipedia.org/wiki/Portable_Network_Graphics">png image files</a></li><li><code>format&quot;HDF5&quot;</code>: the format for <a href="https://en.wikipedia.org/wiki/Hierarchical_Data_Format">hierarchical data files v5</a></li></ul><h2 id="Argument-magic"><a class="docs-heading-anchor" href="#Argument-magic">Argument <code>magic</code></a><a id="Argument-magic-1"></a><a class="docs-heading-anchor-permalink" href="#Argument-magic" title="Permalink"></a></h2><p><code>magic</code> typically contains the <a href="https://en.wikipedia.org/wiki/File_format#Magic_number">magic bytes</a> that identify the format. While file format can sometimes be guessed from the extension (e.g., &quot;pic.png&quot; would likely be a PNG image file), fundamentally the name of the file is something that can be changed by the user, so it may have no relationship to the content of the file. Moreover, there are many examples in which two or more different formats use the same extension, leading to ambiguity about the nature of the file. Is a <code>.gbv</code> file a Genie Timeline file or a PCB CAD file? Is that <code>.fst</code> file an audio file, a puzzle game file, or an R serialized dataframe file?</p><p>To identify the file uniquely, good format designers will include &quot;magic bytes&quot; as part of the content of the file to ensure that one can recognize or validate the format of the file. Typically, these magic bytes are the first bytes in the file, although there are many exceptions.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Formats that use common extensions (e.g., <code>.out</code>) and lack magic bytes cannot be registered with FileIO– permitting this would force us to choose one particular format above all others. In such cases, your package should provide its own I/O without using FileIO. To avoid name conflicts with FileIO, it may be best to avoid exporting names like <code>load</code> and <code>save</code> from your package; use module-qualifiers like <code>MyPkg.load</code> instead.</p></div></div><p>Some formats have multiple &quot;flavors&quot; of magic bytes (which might, for example, include a &quot;format version&quot; number); in such cases <code>magic</code> can be a list of byte sequences. In other cases, files cannot be identified by a specific set of bytes, but there&#39;s a pattern that can be exploited: <code>magic</code> can be a function that returns <code>true</code> or <code>false</code> depending on whether an I/O stream is consistent with the format.</p><p>Examples of magic bytes include:</p><ul><li><a href="https://en.wikipedia.org/wiki/GIF">GIF image files</a> can have magic bytes corresponding to the ASCII characters in <code>&quot;GIF87a&quot;</code>, i.e., <code>[0x47, 0x49, 0x46, 0x38, 0x37, 0x61]</code>. Alternatively, they might use <code>&quot;GIF89a&quot;</code>, which signals a different version of the GIF format.</li><li><a href="https://en.wikipedia.org/wiki/PLY_(file_format)">PLY mesh files</a> can come in two flavors, ASCII and binary. Their magic bytes are <code>&quot;ply\nformat ascii 1.0&quot;</code> and <code>&quot;ply\nformat binary_little_endian 1.0&quot;</code>, respectively. These magic bytes are human-readable and span the first two lines of the file.</li><li><a href="http://genome.ucsc.edu/goldenPath/help/bedgraph.html">BedGraph genomic data files</a> do not have official magic bytes, but they do have a structure which can be fairly reliably recognized by a suitable detection function. (Though it would have made life far more straightforward if the creators of the format had just added some magic bytes!)</li></ul><h2 id="Argument-extension"><a class="docs-heading-anchor" href="#Argument-extension">Argument <code>extension</code></a><a id="Argument-extension-1"></a><a class="docs-heading-anchor-permalink" href="#Argument-extension" title="Permalink"></a></h2><p>This can be a string or list of strings. Each should start with <code>&#39;.&#39;</code>.</p><p>Example: the <a href="http://teem.sourceforge.net/nrrd/format.html">Nearly Raw Raster Data</a> format uses <code>[&quot;.nrrd&quot;,&quot;.nhdr&quot;]</code>.</p><h2 id="Argument-libraries"><a class="docs-heading-anchor" href="#Argument-libraries">Argument <code>libraries</code></a><a id="Argument-libraries-1"></a><a class="docs-heading-anchor-permalink" href="#Argument-libraries" title="Permalink"></a></h2><p>This argument specifies the package or packages that can support input and/or output for the format. Each package specification should be of the form <code>name =&gt; uuid</code>, where <code>name</code> is the name of the package (encoded as a <code>Symbol</code>, e.g., <code>:FeatherFiles</code>) and <code>uuid</code> is the <code>UUID</code> from the package&#39;s <code>Project.toml</code>. The first-to-be listed package has highest priority; FileIO will try to use it to perform the requested operation, and move onto the next only if that fails. Failure might occur because the user does not have the package installed, or because the package&#39;s handler threw an error.</p><p>Some packages may only support specific forms of I/O, and can use <code>LOAD</code> and <code>SAVE</code> as specifiers for supported operations. Likewise, some packages rely on system libraries available only on certain platforms, and can include a platform specifier.</p><p>If your package isn&#39;t (yet) registered, you can alternatively specify the handler as the module itself.  In such cases, your call to <code>add_format</code> will likely be made from within your module or at the Julia REPL rather than in FileIO&#39;s registry. An exception is <code>MimeWriter</code>, a sub-module of <code>FileIO</code> that can write a few <a href="https://en.wikipedia.org/wiki/MIME">MIME</a> formats.</p><p>Here&#39;s a real-world example (contained in FileIO&#39;s <code>src/registry.jl</code>) for PNG:</p><pre><code class="language-julia hljs">add_format(
    format&quot;PNG&quot;,
    UInt8[0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a],
    &quot;.png&quot;,
    [idImageIO],
    [idQuartzImageIO, OSX],
    [idImageMagick],
    [MimeWriter, SAVE]
)</code></pre><p><code>idImageIO</code>, <code>idQuartzImageIO</code>, and <code>idImageMagic</code> are <code>name =&gt; uuid</code> pairs for three different packages. <a href="https://github.com/JuliaIO/QuartzImageIO.jl">QuartzImageIO</a> is available only on macOS (<code>OSX</code>). The <code>MimeWriter</code> module (which is internally accessible to FileIO) only supports output (<code>SAVE</code>), not input.</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>For further examples, users are encouraged to inspect FileIO&#39;s <a href="https://github.com/JuliaIO/FileIO.jl/blob/master/src/registry.jl">registry</a> directly.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../registry/">« Registry table</a><a class="docs-footer-nextpage" href="../implementing/">Implementing loaders/savers »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 27 February 2025 13:22">Thursday 27 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
